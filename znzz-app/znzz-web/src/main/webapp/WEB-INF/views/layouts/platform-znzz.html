<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>${AppName!}后台系统</title>
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<link rel="stylesheet" href="${base!}/assets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
<link rel="stylesheet" href="${base!}/assets/plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="${base!}/assets/plugins/Ionicons/css/ionicons.min.css">


<link rel="stylesheet" href="${base!}/assets/plugins/jvectormap/jquery-jvectormap-1.2.2.css">
<link rel="stylesheet" href="${base!}/assets/dist/css/AdminLTE.css">
<link rel="stylesheet" href="${base!}/assets/dist/css/skins/_all-skins.min.css">
<link rel="stylesheet" href="${base!}/assets/plugins/datatables/dataTables.bootstrap.css">
<link rel="stylesheet" href="${base!}/assets/plugins/datepicker/bootstrap-datepicker3.css">
<link rel="stylesheet" href="${base!}/assets/plugins/iCheck/all.css">
<link rel="stylesheet" href="${base!}/assets/plugins/select2/select2.min.css">
<link rel="stylesheet" href="${base!}/assets/dist/css/bootstrapValidator.css">
<link rel="stylesheet" href="${base!}/assets/dist/css/AdminLTE1.css">
<link rel="stylesheet" href="${base!}/assets/dist/css/skins/_all-skins.min.css">
<link rel="stylesheet" href="${base!}/assets/plugins/toastr/toastr.min.css">
<link rel="stylesheet" href="${base!}/assets/plugins/treetable/jquery.treetable.css">
<link rel="stylesheet" href="${base!}/assets/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css">
<link rel="stylesheet" href="${base!}/assets/plugins/bootstrap-daterangepicker/daterangepicker.css">
<link rel="stylesheet" href="${base!}/assets/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.css">
<link rel="stylesheet" href="${base!}/assets/plugins/gateway/gateway-management.css">
<!-- 
<link rel="stylesheet" href="${base!}/assets/plugins/gateway/gateway-management.css"> -->

<link rel="stylesheet" href="${base!}/assets/css/switchery.css">
<link rel="stylesheet" href="${base!}/assets/css/nestable.css">
<link rel="stylesheet" href="${base!}/assets/css/stepy.css">
<link rel="stylesheet" href="${base!}/assets/plugins/jstree/themes/default/style.min.css">
<link rel="stylesheet" href="${base!}/assets/css/themify-icons.css">
<link rel="stylesheet" href="${base!}/assets/plugins/stepy/jquery.stepy.css">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script src="${base!}/assets/plugins/jquery-1.11.1.min.js"></script>
  <!-- <script src="${base!}/assets/plugins/jQuery/jquery.min.js"></script> -->
    <script type="text/javascript">
    var base = '${base!}';
	 $(document).ready(function () {
	        if($.support.pjax) {
	           <%if(@shiro.getPrincipalProperty('loginPjax')){%>
	          	$(document).pjax('a[data-pjax]', '#container', {maxCacheLength:0,push:false, replace:true,fragment: '#container', timeout: 8000});
	          <%}%> 
	       } 
	      });
	 
</script>
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<div class="wrapper">
		<div class="modal fade" id="loading-modal" data-backdrop="static" data-keyboard="false">
		    <div class="loadEffect">
		        <span></span>
		        <span></span>
		        <span></span>
		        <span></span>
		        <span></span>
		        <span></span>
		        <span></span>
		        <span></span>
		    </div>
		</div>
		<header class="main-header">
			<a class="logo"> <span class="logo-mini"><b>${AppShrotName!}</b></span> <span class="logo-lg"><b>${AppName!}</b></span>
			</a>
			<nav class="navbar navbar-static-top">
				<a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button"> <span class="sr-only">Toggle navigation</span>
				</a>
				<div class="navbar-custom-menu">

					<ul class="nav navbar-nav">
						<li class="dropdown user user-menu"><a href="#" class="dropdown-toggle" data-toggle="dropdown"> <img src="${base!}/assets/dist/img/user2-160x160.jpg" class="user-image" alt="User Image"> <span class="hidden-xs">${@shiro.getPrincipalProperty('username')}</span>
						</a>
							<ul class="dropdown-menu">
								<!-- User image -->
								<li class="user-header"><img src="${base!}/assets/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
									<p>
										${@shiro.getPrincipalProperty('unitid')} <small>${@shiro.getPrincipalProperty('email')}</small>
									</p></li>
								<li class="user-footer">
									<div class="pull-left">
										<a href="#" class="btn btn-default btn-flat">${msg['index.user.password']}</a>
									</div>
									<div class="pull-right">
										<a href="${base!}/platform/login/logout" class="btn btn-default btn-flat">退出系统</a>
									</div>
								</li>
							</ul></li>
					</ul>
				</div>
			</nav>
		</header>
		<aside class="main-sidebar">
			<section class="sidebar">
				<div class="user-panel">
					<div class="pull-left image">
						<img src="${base!}/assets/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
					</div>
					<div class="pull-left info">
						<p>${@shiro.getPrincipalProperty('username')}</p>
						<a href="#"><i class="fa fa-circle text-success"></i>在线</a>
					</div>
				</div>

				<ul id="nav" class="sidebar-menu">
					<li class="header">主导航</li>
					<li class="active treeview"><a href="${base!}/platform/home"><i class="fa fa-circle-o"></i><span>首页</span></a></li>					
						<%
		            	var secondMenus=@shiro.getPrincipalProperty('secondMenus');
		            	for(firstMenu in @shiro.getPrincipalProperty('firstMenus')){		   
		           	 %>
					<li class="treeview">
				
					<% if(!isEmpty(@secondMenus.get(firstMenu.path))){%>
						<a href="#"> 
							<% if(has(firstMenu.icon)){ %>
							<i class="fa fa-table"></i> 
							<% } %>
							<span><%if(lang=="zh_CN"){%>${firstMenu.name}<%}else{%>${firstMenu.aliasName}<%}%></span>
							<span class="pull-right-container"> 
								<i class="fa fa-angle-left pull-right"></i>
							</span>
						</a>
						
						<%}else{%>
							<a href="<% if(!isEmpty(firstMenu.href)){ %><%if(@string.startWith(firstMenu.href,'/')){%>${base}${firstMenu.href!}<%}else{%>${firstMenu.href!}<%}%> <% }else{ %>javascript:;<% } %>"
                     		<%if(@string.startWith(firstMenu.target,'_')){%>target="${firstMenu.target!}"<%}else{%>${firstMenu.target!}<%}%>>
							<span>
                        <%if(lang=="zh_CN"){%>${firstMenu.name}<%}else{%>${firstMenu.aliasName}<%}%></span></a>
                    	<%}%>
							
						<% if(!isEmpty(@secondMenus.get(firstMenu.path))){%>	
						<ul class="treeview-menu">
							<% for(secondMenu in @secondMenus.get(firstMenu.path)){ %>
								<li>
								 <a href="<% if(!isEmpty(secondMenu.href)){ %><%if(@string.startWith(secondMenu.href,'/')){%>${base}${secondMenu.href!}<%}else{%>${secondMenu.href!}<%}%> <% }else{ %>javascript:;<% } %>" <%if(@string.startWith(secondMenu.target,'_')){%>target="${secondMenu.target!}"<%}else{%>${secondMenu.target!}<%}%>>
                            <% if(!isEmpty(@secondMenus.get(secondMenu.path))){ %><i class="fa fa-circle-o"></i><%}%>
								 <%if(lang=="zh_CN"){%>${secondMenu.name}<%}else{%>${secondMenu.aliasName}<%}%>
								 <span class="pull-right-container"> 
								<i class="fa fa-angle-left pull-right"></i>
								</span>
								 </a>								
								<% if(!isEmpty(@secondMenus.get(secondMenu.path))){ %>
                        <ul class="treeview-menu" style="margin-left:25px;">
                            <% for(thMenu in @secondMenus.get(secondMenu.path)){ %>
                            <li>
                                <a <% if(!isEmpty(thMenu.href)){ %>href="<%if(@string.startWith(thMenu.href,'/')){%>${base}${thMenu.href!}<%}else{%>${thMenu.href!}<%}%>" <% }else{ %>href="javascript:;"<% } %> <%if(@string.startWith(thMenu.target,'_')){%>target="${thMenu.target!}"<%}else{%>${thMenu.target!}<%}%>>
                                <span><%if(lang=="zh_CN"){%>${thMenu.name}<%}else{%>${thMenu.aliasName}<%}%></span>
                                </a>
                            </li><% }%>
                        </ul><%}%>
								</li><%}%>
								
						</ul><%}%>
					</li><%}%>
					
				</ul>
			</section>
		</aside>	
        <div class="content-wrapper" id="container">
 			${layoutContent}
  		</div>   
		
		<div class="control-sidebar-bg"></div>
		<footer class="main-footer">
			<div class="pull-right hidden-xs">
				<b>${AppName!}</b> 后台系统
			</div>
			<strong>Copyright &copy; 2017 <a href="http://www.htfudao.com.cn/">航天福道</a></strong>
		</footer>
	</div>
	<script src="${base!}/assets/plugins/jstree/jstree.min.js"></script>
	<script src="${base!}/assets/bootstrap/js/bootstrap.min.js"></script>
	<script src="${base!}/assets/plugins/fastclick/fastclick.js"></script>
	<script src="${base!}/assets/dist/js/app.min.js"></script>
	<script src="${base!}/assets/plugins/sparkline/jquery.sparkline.min.js"></script>
	<script src="${base!}/assets/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
	<script src="${base!}/assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
	<script src="${base!}/assets/plugins/slimScroll/jquery.slimscroll.min.js"></script>
	<script src="${base!}/assets/plugins/chartjs/Chart.min.js"></script>
	<!-- <script src="${base!}/assets/dist/js/pages/dashboard2.js"></script> -->
	<script src="${base!}/assets/dist/js/warning.js"></script>
	<script src="${base!}/assets/js/form.js"></script>
	<script src="${base!}/assets/js/jquery.pjax.js"></script>
	<script src="${base!}/assets/plugins/datatables/jquery.dataTables.min.js"></script>
	<script src="${base!}/assets/plugins/datatables/dataTables.bootstrap.min.js"></script>
	
<!-- 	
	<script src="${base!}/assets/plugins/gateway/gateway-management.js"></script>
	 -->
	
	<script src="${base!}/assets/plugins/iCheck/icheck.min.js"></script>
	<script src="${base!}/assets/plugins/select2/select2.full.min.js"></script>
	<script src="${base!}/assets/dist/js/bootstrapValidator.js"></script>
	<!-- <script src="${base!}/assets/dist/js/app.min.js"></script> -->
	<!-- <script src="${base!}/assets/dist/js/demo.js"></script> -->
	<script src="${base!}/assets/plugins/toastr/toastr.min.js"></script>
	<script src="${base!}/assets/js/toast.js"></script>
	<script src="${base!}/assets/js/main.js"></script>
	<script src="${base!}/assets/plugins/treetable/jquery.treetable.js"></script>
	<script src="${base!}/assets/js/page.js"></script>
	<script src="${base!}/assets/plugins/switchery/switchery.js"></script>
	<script src="${base!}/assets/plugins/jquery.form.js"></script>
	<script src="${base!}/assets/plugins/moment/min/moment.min.js"></script>
	<script src="${base!}/assets/plugins/datepicker/bootstrap-datepicker.js"></script>
	<script src="${base!}/assets/plugins/bootstrap-datepicker/dist/locales/bootstrap-datepicker.zh-CN.min.js"></script>
	
	<script src="${base!}/assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<script src="${base!}/assets/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
	<script src="${base!}/assets/plugins/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
	<script src="${base!}/assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
	<script src="${base!}/assets/js/date.js"></script>
	<script src="${base!}/assets/plugins/stepy/jquery.stepy.js"></script>
	<script src="${base!}/assets/plugins/stepy/jquery.validate.min.js"></script>
	<script src="${base!}/assets/plugins/jquery.sortable.js"></script>
	<script src="${base!}/assets/plugins/jquery.nestable.js"></script>
	<script>
	$(document).ready(function () {    	
        function loading(loadStatus) {
        	if (loadStatus === true) {
        		$("#loading-modal").modal('show');
        	} else if(loadStatus === false) {
        		$("#loading-modal").modal('hide');
        	}else {}
        }
    });
	</script>
</body>
</html>
